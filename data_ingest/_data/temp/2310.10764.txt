Tractable Aggregation in Endogenous
Network Formation Models
Jose Betancourt∗
Yale University
October 2023
Abstract
This paper presents new conditions under which the stationary distribution of a
stochastic network formation process can be characterized in terms of a generating
function. These conditions are given in terms of a transforming function between net-
works: if the total transformation between two networks is independent of how these
networks transform into each other (by adding or deleting links), then the process is
reversible and a generating function can be constructed. When the network formation
process is given by discrete choices of link formation, this procedure is equivalent to
proving that the game with the associated utilities is a potential game. This implies
that the potential game characterization is related to reversibility and tractability of
network formation processes. I then use the characterized stationary distribution to
study long-run properties of simple models of homophilic dynamics and international
trade. The effects of adding forward-looking agents and switching costs are also dis-
cussed.
JEL Classification: C73, D85, F10
Keywords: Random Networks, Dynamic Models, Graph Limits, Homophily, Interna-
tional Trade.
∗Email: jose.betancourtvalencia@yale.edu.
I would like to thank Tom´ as Rodr´ ıguez-Barraquer, Aniko ¨Ory, Kevin Williams, Angelo Mele, Kevin Yin,
and Eric Solomon for helpful comments.
1arXiv:2310.10764v1  [econ.TH]  16 Oct 20231 Introduction
Economic networks play a central role in the dynamics and outcomes associated to vari-
ous economic phenomena, ranging from the social aspects of individual interactions, such
as homophily, employment dynamics and information transfers, to various macroeconomic
behaviors such as international trade and credit relations. Understanding how individual
interactions couple together to generate aggregate outcomes gives us richer insight both into
the micro behaviors and their corresponding macro phenomena.
There has been extensive work on the dynamics of network formation, both on determin-
istic [Bala and Goyal, 2000, Jackson and Watts, 2001, Jackson et al., 2012] and stochastic
settings [Jackson and Watts, 2002, Mele, 2017]. Previous work has shown that when a po-
tential can be associated to the network formation process, the stationary distribution of the
system can be given explicitly in terms of this potential [Butts, 2009]. I contribute to this lit-
erature by presenting novel conditions, similar to the ones in [Monderer and Shapley, 1996],
under which such a potential can be constructed for a wide class of network formation pro-
cesses. These conditions correspond to the difference in potential between two networks
being independent of how these transform into each other. Additionally, I use this frame-
work to generate tractable aggregate models of homophilic dynamics and international trade
starting from individual behaviors. As such, this paper contributes to the understanding of
the long-run dynamics of a rich set of social structures.
I study a model of stochastic network formation in which individuals randomly evaluate
the relationship they have with another individual, deciding whether to sever a link if one
is present or to create a link if it is absent. These dynamics can be generated from vari-
ous network dynamic processes, both at an individual and at a global level. For example,
at an individual level, these processes can be obtained from stochastic deviations from de-
terministic solutions [Jackson and Watts, 2002] or from stochasticity in the utility function
itself [Mele, 2017], while global-level dynamics can be generated by a social planner making
these decisions. Convergence of the distribution of networks in this setting can be guaran-
teed under relatively weak conditions. I show that this distribution can be characterized in
closed form if the stochastic process satisfies certain conditions, generalizing the results in
2[Mele, 2017]. These results follow from considering the formation process as being generated
by Glauber dynamics [Glauber, 2004] and matching the stationary distribution to the one
being sampled in the Glauber process. In these processes, links are directed, but the analyses
can be extended to undirected networks. In the undirected case, however, the calculation
of the limiting probability distribution proves to be significantly more complex than in the
directed case.
Using the characterization of the equilibrium dustribution, I use methods from statistical
mechanics [Park and Newman, 2004] to generate simple aggregate models of homophily and
international trade that arise from stochastic network formation. In these models, I obtain
aggregate statistics from the distribution over networks in equilibrium, providing a dynamic
networks foundation for relations between macroeconomic outcomes.
The characterization of aggregate models using equilibrium statistics proves useful for
structural estimation of the dynamic parameters in network generation. Structural esti-
mation using the equilibrium outcomes of the network using Markov chain Monte Carlo
(MCMC) is explored in a general setting in [Mele, 2017]. I show that maximum likelihood
estimation in this setting is equivalent to matching of moments when the equilibrium statis-
tics can be related to derivatives of the utility functions.
2 General properties of network formation processes
2.1 Preliminaries
The general model consists of a set N={1, . . . , N }ofNindividuals who can interact with
each other on a directed unweighted graph. I will use the notation ijto refer to the tuple
(i, j). Since I do not consider self-interactions, the set of possible dyads associated to these
individuals is given by D={ij∈ N2|i̸=j}. A network gonNis defined as a subset of
D, corresponding to the diads for which there is a link. Let G=P(D), where Pdenotes the
power set, be the set of all possible networks on N.
I will consider dynamics of stochastic network formation given by a Markov chain over the
space of networks. I begin by considering discrete time, which will be indexed by t= 0,1, . . .,
3and will later extend the results to continuous time. Define the marginal probability measure
at time tasπt(g)≡P{Gt=g}. Agents undergo a meeting process where, at each point in
time, they have the possibility of altering the structure of the network. Agent iwill meet
with agent jwith probability qij>0, which we will assume to be exogenous and independent
of time and the network state. During this meeting, bank iwill be able to evaluate whether
it will have a link to agent jin the future or not. I assume that any ordered pair of agents
has a positive probability of meeting and that only one of these pairs can meet in one period,
such that the potential meeting events are mutually exclusive. Additionally, we assume that
there is a positive probability of no meetings ocurring. Define the total meeting probability
as
q=X
ij∈Dqij. (1)
My assumptions on the meeting process imply that q∈(0,1). The structure of the meeting
process is encoded in the vector q≡(qij)ij∈D.
In order to describe the process of link updating, it will be useful to define a set of
“switching” functions. Consider the family of functions ( σij)ij∈D, where for every ij∈ D,
σij:G → G is defined by
σij(g) =

g∪ {ij}ifij̸∈g
g\{ij}ifij∈g.(2)
Intuitively, σijcreates the link ijif it is not present in a network and severs it if it is. Note
that these functions satisfy the following properties for all ij, i′j′∈ D:
σij◦σi′j′=σi′j′◦σij,
σij◦σij= 1, (3)
where 1is the identity operator in G. Additionally, we can define the composition of Mof
4these operators for a sequence i1j1, . . . , i MjMof dyads as
MY
m=1σimjm≡σi1j1◦. . .◦σiMjM. (4)
For a given network state g, once a meeting occurs for the dyad ij, the state of the
associated link will switch with probability pij(g). The evolution of the probability measure
is given by
πt+1(g) = (1 −q)πt(g)|{z}
No meetings+X
ij∈Gqij(pij(σij(g))πt(σij(g))| {z }
Link ijis changed+ (1−pij(g))πt(g)| {z }
Link ijis not changed). (5)
We can re-write this as
πt+1(g) =πt(g) +qX
ij∈Gqij
q
(pij(σij(g))πt(σij(g))−pij(g)πt(g)). (6)
Note that we can interpret q/qas the vector of meeting probabilities conditional on there
being a meeting, and that this corresponds to a probability distribution with full support over
D. Now, we can enumerate the space of networks through a bijection h:{1, . . . ,|G|} → G and
re-cast this evolution equation to a vector equation. First, define πt≡(πt(h(k))k∈{1,...,|G|}).
Define the matrix A(q/q) by
Akl(q/q) =

−P
ij∈D
qij
q
pij(h(k)) if k=l

qij
q
pij(h(l)) if h(l) =σij(h(k))
0 if h(l)̸=σij(h(k)) for every ij∈ D.(7)
The probability measure πtevolves as πt+1=P(q/q)πt, where P(q/q) is the transition
matrix of the Markov chain.1This matrix will be given by P(q/q) =I+qA(q/q), where I
is the identity matrix of dimension |G|.
1Note that this corresponds to πtbeing a column vector and P(q/q) being column-stochastic. The
convention can sometimes be the opposite (row vectors and row-stochastic matrices) in the literature.
52.2 Convergence
I begin the analysis of the properties of the model by showing sufficient conditions under
which the probability distribution converges point-wise to a stationary distribution.
Lemma 1. Ifpij(g)∈(0,1)for all ij∈ D and all g∈ G, then there is a unique stationary
distribution over the network states. Furthermore, the marginal distributions πtwill converge
point-wise to the unique stationary distribution. That is, πt(g)→π(g)ast→ ∞ for all
g∈ G.
The conditions for convergence stated in Lemma 1 are relatively weak, implying that any
stochastic network formation process where the switching probabilities are non-degenerate
will converge to a stationary measure. It is of general interest to study the properties of the
stationary distribution of the process, since it can give insights on the long-term dynamics
of the system. However, characterizing this distribution is, in general, a more complicated
process than proving convergence. Throughout this section I give sufficient conditions under
which the stationary distribution of a network formation process can be characterized in
terms of a “generating function”, and will give a way to construct it.
Definition 1. A function ϕ:G × D → Ris said to be conservative if for any g∈ G, and
any two sequences of dyads i1j1, . . . , i MjMandi′
1j′
1, . . . , i′
M′j′
M′such that
 MY
m=1σimjm!
(g) = M′Y
m=1σi′mj′m!
(g), (8)
the following holds:
MX
m=1ϕimjm" m−1Y
n=1σinjn!
(g)#
=M′X
m=1ϕi′mj′m" m−1Y
n=1σi′nj′n!
(g)#
. (9)
We can interpret ϕij(g) as the contribution to some cumulative “change” quantity cor-
responding to switching the state of the dyad ijgiven the network g. We can, then, think
of the total change associated to a sequence of dyad switchings as the sum of the associated
individual sequential changes. The conservative property intuitively states that the total
change associated to transforming some network gto another network g′is independent of
6how this transformation is carried out. This is analogous to a conservative vector field, which
satisfies that the integral between two points is path-independent.
It is useful to note that any function Ψ : G →Rinduces a conservative function given
byψij(g)≡Ψ(σij(g))−Ψ(g). Lemma 2 states the inverse relation: that any conservative
function ψinduces a function Ψ such that ψij(g)≡Ψ(σij(g))−Ψ(g), and gives a construction
for this function. Additionally, it gives sufficient conditions to evaluate conservativeness.
Lemma 2. A function ϕ:G × D → Ris conservative if and only if it satisfies the following
two properties:
1. For all g∈ Gand all ij∈ D,
ϕij(g) =−ϕij(σij(g)). (10)
2. For all g∈ Gand all ij, i′j′∈ D,
ϕij(g) +ϕi′j′(σij(g)) =ϕi′j′(g) +ϕij(σi′j′(g)) (11)
Furthermore, if ϕis conservative, then there exists a function Φ :G →Rsuch that for every
g∈ Gand every ij∈ D, it satisfies
Φ(σij(g))−Φ(g) =ϕij(g). (12)
Fixing a value of Φ(∅), this function is unique and can be constructed as
Φ(g) = Φ( ∅) +|g|X
n=1ϕinjn n−1[
m=1{imjm}!
, (13)
where i1j1, . . . , i |g|j|g|is an arbitrary ordering of the links in g.
Lemma 2 gives properties that are sufficient to construct a network-dependent function
that summarizes the properties of a function that depends both on dyads and networks.
Proposition 1 states that for a particular construction of ϕfrom the transition probabilities
7Figure 1: Illustration of a conservative function
ϕij(g)
ϕi′j′(g)ϕi′j′(σij(g))
ϕij(σi′j′(g))gσij(g)
σi′j′(g)σi′j′◦σij(g)ϕij(g) +ϕi′j′(σij(g))
=
ϕi′j′(g) +ϕij(σi′j′(g))
Note: In order for ϕto be conservative, the sum of the values corresponding to the top path must coincide with the sum of
values corresponding to the bottom path.
in a network formation process, such a function characterizes the stationary distribution of
the system.
Proposition 1. Consider a network formation process parametrized by the non-degenerate
probabilities ((pij(g))ij∈D)g∈G. Define the function ϕ:G × D → Rby
ϕij(g) = logpij(g)
pij(σij(g))
. (14)
Then the following are equivalent:
1. The process has an associated generating function Φ(g)such that
pij(g)
pij(σij(g))= exp(Φ( σij(g))−Φ(g)). (15)
2.ϕis a conservative function.
3. The network formation process is reversible.
8Additionally, if these conditions are satisfied, then the process converges to the stationary
distribution given by
π(g) =exp(Φ( g))P
g′∈Gexp(Φ( g′)), (16)
where Φ(g)is given by the construction in Lemma 2 using ϕ.
The relation between the existence of a generating function and conservativeness is given
by Lemma 2. We can intuitively understand how reversibility is associated to these properties
as follows: the revesibility property implies that, for any gandij, we have
qijpij(g)π(g) =qijpij(σij(g))π(σij(g)). (17)
By taking logs, this yields
log(π(g))−log(π(σij(g))) =−logpij(g)
pij(σij(g))
=−ϕij(g). (18)
Since log( π) is a network-function, we know that the difference must correspond to a conser-
vative function. As such, it follows naturally that reversibility requires the conservativeness
ofϕ.
Proposition 1 gives sufficient conditions under which a generating function can be con-
structed, as well as characterizing the stationary network distribution under these conditions.
With this characterization, the long-run behavior of systems associated to the formation pro-
cess can be studied. This is of particular interest in economic systems, since we can perform
comparative statics on the network formation parameters to analyze their effects on long-run
outcomes of interest. I will explore how this framework can be applied to study aggregate
homophilic behavior and international trade in subsequent sections.
2.3 Continuous time model
I now consider a model of network formation that is analogous to the previous discrete time
model. It is comprised of a Poisson arrival process with rates λij>0 for every ij∈ D.
9This means that the probability of link ijbeing evaluated between time tand time t+ ∆t
is given by λij∆t+o(∆t). These arrival rates do not depend on the state of the network.
This process has an analogous convergence property to the one discussed previously.
From this process, the probability measure πtfollows the master equation
˙πt(g) =X
ij∈Dλij(pij(σij(g))πt(σij(g))−pij(g)πt(g)). (19)
Note that by defining the vector of arrival rates λ≡(λij)ij∈Dand the total arrival rate
λ≡P
ij∈Dλij, we can describe the evolution by
˙πt=λAλ
λ
πt. (20)
Lemma 3. The results in Proposition 1 apply to the continuous time model.
2.4 Ensemble averages
The normalization factor in the equilibrium distribution given in Equation (16) is of great
interest in the field of statistical physics [Gould and Tobochnik, 2010]. It is commonly re-
ferred to as the partition function and denoted with Z, and is used to analyze the statistical
properties of physical systems. I will use similar techniques to the ones used in statistical
physics to analyze the stationary properties of network formation processes that satisfy the
properties in Proposition 1.
Since it is of interest to study the formation of networks on an arbitrary number of
individuals, we focus on generating functions that depend on the size of the network and on
some set of nparameters ω= (ωi)1≤i≤nthat are independent of N.GNandDNcorrespond
to the sets of networks and dyads over Nnodes, respectively, and Ωbe the set of possible
parameters. Consider a network formation process over Nnodes that satisfies the properties
stated in Proposition 1. If the generating function for a network g∈ GNis given by Φ N(g;ω),
10the partition function of the system is defined as
ZN(ω) =X
g∈GNΦN(g;ω). (21)
Denote the associated stationary distribution for the system of size Nas (πN(g;ω))g∈GN. I
denote the ensemble average of a function fN:GN×Ω→Runder the stationary distribution
as
⟨fN(ω)⟩ ≡X
g∈GNπN(g;ω)fN(g, ω)
=1
ZN(ω)X
g∈GNexp(Φ N(g;ω))fN(g, ω). (22)
The partition function is particularly useful to find ensemble averages of quantities related to
the potential. Specifically, the ensemble average of a derivative of the potential with respect
to a parameter can be obtained by
∂ΦN(ω)
∂ωi
=∂log(ZN(ω))
∂ωi. (23)
In cases where the logarithm of the partition function scales as N2, we can define the
“per-link” partition function
ζ(ω) = lim
N→∞log(ZN(ω))
N2. (24)
Additionally, if we have
lim
N→∞1
N2∂ΦN(ω)
∂ωi
=−∂ζ(ω)
∂ωi, (25)
for some ωi∈ω, with∂ζ(ω)
∂ωinon-zero and finite, then the quantity associated to∂ΦN(·;ω)
∂ωi
will also scale as N2. In particular, if there is an ωisuch that this quantity corresponds
to the number of links in the network, the associated network formation process is said to
generate dense networks. That is, the average number of links will converge to a non-zero
11fraction of the number of possible links. Dense network formation processes have been studied
previously in [Mele, 2017]. In the following sections, I will study economic applications in
which dense network formation processes emerge, and characterize aggregate quantities of
interest for each case.
3 Myopic link formation
Having established the general aspects of the network formation processes studied in this
paper, I now focus on how economic incentives are integrated into these formation dynamics.
This section studies myopic link formation, where individuals don’t take into account the
actions of others to make their decisions. Subsequent sections deal with agents that take
into account others’ actions and their effects on the network formation process.
3.1 Discrete choice in link formation
The network formation dynamics discussed in the previous section can be generated by a
variety of microfounded models in which choices related to the network formation process
are stochastic. An example of a model that captures this is a discrete choice model of
link formation. Consider a case in which agent ihas an baseline utility Vi(g) associated to
network g, and that there are stochastic shocks to utility based on the idiosyncrasies of the
meeting process. Conditional on link evaluation, the utility agent iobtains from changing
the state of their link to agent jgiven a network gis given by u1
ij(g), while the utility of not
changing the state of the link is u0
ij(g). These utilities are given by
u0
ij(g) =Vi(g) +ε0
ij,
u1
ij(g) =Vi(σij(g)) +ε1
ij, (26)
where the shocks εk
ijare i.i.d. and follow some distribution F0. Let F1be the distribution
followed by ε1
ij−ε0
ij. Note that this distribution satisfies F1(x) = 1−F1(−x) since the shocks
12follow the same distribution. This implies that the switching probabilities are given by
pij(g) =P{Vi(σij(g))−Vi(g)≥ε0
ij−ε1
ij}
=F1(Vi(σij(g))−Vi(g)). (27)
This implies that the associated ϕfunction from Proposition 1 is given by
ϕij(g) = logF1(Vi(σij(g))−Vi(g))
F1(Vi(g)−Vi(σij(g)))
. (28)
Note that these values satisfy the following relation:
ϕij(g)>0⇐⇒ Vi(σij(g))> V i(g). (29)
This suggests that the log odds-ratio that characterizes the stationary distribution encodes
some information about the incentives agents have to switch the state of a link. This can
be studied under the framework of potential games [Monderer and Shapley, 1996], in which
information about the incentives to deviate of all the players in a game can be encoded into
a single function.
Definition 2. The network formation game is said to be an ordinal potential game if there
exists a function Q:G →Rsuch that, for all g∈ Gand all ij∈ D,
Vi(g)−Vi(σij(g))>0⇐⇒ Q(g)−Q(σij(g))>0. (30)
Furthermore, the game is called an exact potential game if there exists a function Q:G →R
such that, for all g∈ Gand all ij∈ D,
Q(g)−Q(σij(g)) =Vi(g)−Vi(σij(g)). (31)
In either case, if such a function exists, it is called an associated potential of the game.
The previous analysis of the stationary distribution of the network formation process
allows for aggregation of the individual link-formation decisions to obtain the generating
13function. Proposition 2 connects this aggregation to the aggregation of the individual in-
centives when the network is formed via discrete choice, revealing a connection between
stationariety and the existence of a potential function.
Proposition 2. LetV:N × G → Rbe the utility functions agents assign to the networks.
Then if the associated discrete-choice network formation process is reversible it implies that
the associated game where strategies correspond to link-switching is an ordinal potential game.
Under reversibility, the generating function of the network formation process is an associated
potential of the game, and it is given by the construction in Lemma 2 using ϕfrom Equation
(28).
Furthermore, if the utility shocks follow a type 1 extreme value distribution (T1EV), then
reversibility implies that the game is an exact potential game. Additionally, the existence of
an exact potential implies reversibility. The generating function in this case reduces to
Φ(g) = Φ( ∅) +NX
m=1(Vim(gm)−Vim(gm−1)), (32)
where i1, . . . , i Nis an arbitrary ordering of Nandgn≡gn−1∪S
j∈Ni(g){inj}
, with g0≡∅.
With the characterization of the potential/generating function in Proposition 2, we can
link the individual incentives of players to dynamic observables in the network formation
process. Specifically, this characterization will prove useful to calculate long-term averages
of aggregate properties of the system.
3.2 Switching costs
The discrete choice framework can be extended to include the case where the switching
probabilities depend on the current state. I analyze the case where this dependence is
incorporated as an additional cost to changing the state. This can also be interpreted as a
bias to staying in the current state. The utilities in this case are given by
u0
ij(g) =Vi(g) +s+ε0
ij,
u1
ij(g) =Vi(σij(g)) +ε1
ij, (33)
14where s >0. Focusing on the scenario where the shocks follow a T1EV distribution, we can
study the conditions for conservativeness in detail. Define the function
ζ(x;s)≡x+ log1 +ex+s
ex+es
. (34)
We can write the ϕfunction in this case as
ϕij(g) =ζ(Vi(σij(g))−Vi(g);s). (35)
Expanding to linear order in s, we can analyze the behavior of this function for small s.The
first term in the expansion is given by
ζ(x;s) =x+sex−1
ex+ 1
+O(s2). (36)
We can see that even small values of sintroduce non-linearities in the function’s dependence
onx. This implies that, even for very small switching costs, it is not sufficient to have
conservativeness in the s= 0 to have it when s >0.
3.3 Other models of myopic link formation
3.3.1 Stochastic deviations from optimality
An alternate decision process which results in stochastic network formation is the one stud-
ied in [Jackson and Watts, 2002]. In this model, every time a link is evaluated, there is a
known optimal decision that is not stochastic. However, with a probability ϵ∈(0,1), the
opposite action is implemented. The information about the optimal decision process can be
summarized in a function s:D × G → { 0,1}, where sij(g) = 1 if it is optimal for the dyad
ijto be in the network given the current network g, and sij(g) = 0 otherwise. Note that
this is the case where scorresponds to pure strategies, which I have chosen for simplicity. I
focus on the case where sij(g) =sij(σij(g)) for all ijandg, such that the optimal state of
the dyad only depends on the rest of the network.
15The switching probabilities in this model are given by
pij(g) = (1 −ϵ) 1{sij(g)̸=gij}+ϵ 1{sij(g) =gij}, (37)
where gij= 1{ij∈g}. This means that the state of the dyad is changed with probability ϵ
if the current state is optimal, and it is changed with probability 1 −ϵif the current state is
not optimal. We can define
mij(g) = 1{sij(g) =gij},
such that mij(g) = 1 means that the state of dyad ijmatches the optimal decision given
g. Note that since sij(g) =sij(σij(g)), we have that mij(g) = 1−mij(σij(g)), and therefore
pij(g) = 1−pij(σij(g)). This implies that the associated ϕis
ϕij(g) = Λ( ϵ)mij(g) + Λ(1 −ϵ)(1−mij(g)), (38)
where
Λ(p) = logp
1−p
. (39)
Since Λ(1 −ϵ) =−Λ(ϵ), we have that
ϕij(g) = Λ( ϵ)[2mij(g)−1]. (40)
Note that ϵonly enters ϕin a multiplicative factor that is the same for all ij∈ Dandg∈ G.
This means that the conservativeness of ϕwill depend only on the structure of s.
The conditions for conservativeness in Lemma 2 are satisfied if and only if, for all ij, i′j′∈
Dand all g∈ G,
mij(g) +mi′j′(σij(g)) =mi′j′(g) +mij(σij(g)). (41)
Intuitively, this condition means that, for any two networks that can be transformed into
16each other by changing the state of two dyads, the number of optimal changes in the trans-
formation is independent of the order in which the states of the dyads are changed. If the
conditions for conservativeness are satisfied, the generating function of the system is
Φ(g) = Λ( ϵ)(2nopt(g)− |g|),
where nopt(g) is the number of optimal optimal dyad changes, starting from the empty
network, needed to obtain g. This quantity is independent of the order in which the dyads
are changed, which is a direct consequence of Proposition 1. Since the stationary probability
associated to a network is increasing in Φ, we have that networks generated from a greater
number of optimal changes will be more likely if ϵ <1/2, while they will be less likely if
ϵ > 1/2. If ϵ= 1/2, every evaluation will yield a completely random outcome, and all
networks will be equally likely.
3.3.2 Central planner problem
We can also consider a network generation process in which a central planner can stochas-
tically propose a dyad evaluation and choose whether to change the state of the dyad. The
planner has a welfare function W:G →R. If the utility associated to forming or severing a
link is independent of the state of the dyad, the utilities in a dyad evaluation are given by
u0
ij(g) =W(g∪ {ij}) +ε0
ij,
u1
ij(g) =W(g\{ij}) +ε1
ij,
such that the shocks follow a T1EV distribution. In this model, the conditions for conser-
vativeness are automatically satisfied, meaning that a generating function can be associated
to the process. The associated function, then, is given by
Φ(g) =W(g).
Since the function Wcan be arbitrary, this model captures a much richer class of network
formation processes than the previous models. This is, however, at the cost of not having
17heterogeneity in the incentives to form or sever links.
4 Forward-looking agents
The previous section analyzed the case of agents that made choices based only on utilities
dependent on the state of the network, independent of their beliefs of the future. In this
section I extend this framework to allow individuals to consider the future actions of others.
Consider the continuous-time network formation game. I study Markov-Perfect Equilibria
(MPE), where the strategies of agents depend only on the state of the network. That is, at
time t, an individual’s strategy is measurable with respect to Gt. In this setting, I consider
that agents discount the future at a rate β, and that there are stochastic shocks to their
utility due to the idiosyncracies of the meeting process, as in Section 3.1.
Suppose agent iderives a flow utility vi(g) if the state of the network is g. Then the
present value associated to being in the network ggiven a future stochastic network formation
process is given by
Vi(g) =βZ∞
0e−βt"X
g′∈Gvi(g′)P{Gt=g′|G0=g}#
dt, (42)
where the factor βis introduced in order to interpret this value function as an average of
the flow utilities, as well as allowing the present value to be comparable to the idiosyncratic
shocks regardless of the value of β. Individuals make their link formation/severing decisions
based on this present value, where the utilities used when evaluating a link are as given in
Equation (26).
For a given network formation process, we can define V≡((Vi(g))i∈N)g∈Gas the set of
present values for all agents in all possible states. In equilibrium, the future probabilities
of being in a given state will be a function of V, since these present values determine the
switching probabilities. Specifically, any equilibrium must satisfy
Vi(g) =X
g′∈Gvi(g′)˜P(g′, g|β,V), (43)
18where
˜P(g′, g|β,V) =βZ∞
0e−βtP{Gt=g′|G0=g, β,V}dt. (44)
The inter-dependence of the present values of different individuals makes this problem
significantly more complex than in the myopic case. Proposition 3 outlines some general
properties about MPEs in this setting, as well as limiting behavior they must satisfy.
Proposition 3. For every β∈(0,1)and every set of flow-utilities v:N ×G → R, a Markov-
Perfect Equilibrium exists. Additionally, let (βn)n∈Nbe a sequence of discount factors and
letVnbe a Markov-Perfect Equilibrium consistent with βn. Then the following hold:
1. If limn→∞βn= 0, then for every i∈ N and all g∈ G,
lim
n→∞Vn
i(g) =1
|G|X
g′∈Gvi(g′). (45)
2. If limn→∞βn=∞, then for every i∈ N and all g∈ G,
lim
n→∞Vn
i(g) =vi(g). (46)
Proposition 3 implies that, in equilibrium, if individuals are infinitely impatient they are
no different than in the myopic case. If they are infinitely patient, then only the long-term
behavior of the network formation process is relevant. As such, the initial state of the process
does not matter, as is evidenced in the limiting behavior of the value function.
Note that the results from Section 3.1 can be applied to an equilibrium if the myopic
utilities are replaced by the present values. However, establishing conservativeness is in
general not possible if a characterization of the equilibrium valuations is not achievable.
195 Applications of the framework
5.1 A homophilic process of network formation
Homophily is the tendency of individuals to disproportionately form connections with peo-
ple similar to themselves. This is a well-documented phenomenon present in various so-
cial settings [McPherson et al., 2001]. There has been extensive work done on the ori-
gins of homophily [Currarini et al., 2009], as well as its effects communication and learn-
ing [Golub and Jackson, 2012]. I will apply the previously laid out framework to a simple
model that generates homophilic dynamics, allowing for the characterization of the aggregate
properties that emerge in large networks.
I will use the model of demand described in Section 3.1 as a generator of the dynamics of
the model. As a baseline, consider a utility function where the marginal utility of forming a
link between individuals depends only on their characteristics, not on the rest of the network.
Specifically, suppose that individuals have a baseline utility v0of forming a friendship link
and they experience negative utility proportional to how distant they perceive the potential
friend. By denoting the distance agent iperceives agent jas with Dij>0, the utility agent
iassociates to network gis
Vi(g) =X
j∈Ni(g)[v0−γDij], (47)
where Ni(g) is the set of outgoing neighbors of iing. That is, Ni(g) ={j|ij∈g}. Let
Dbe an upper bound on Dijthat is independent of N. Note that this model satisfies the
conditions for reversibility in Proposition 1, since there is no network dependence in the link
formation probabilities. This implies that ϕij(g) =ϕij(g′) for all ij∈ D and all g, g′∈ G,
making it trivially satisfy conservativeness. I will later extend the model to include network
dependence in the marginal utility. The associated generating function in this case is given
by
ΦN(g;α, γ) =X
ij∈g(v0−γDij). (48)
20In this model, the parameters γandv0have clear interpretations, not only in the individual
utility, but in aggregate quantities. We see that, for a given g,∂ΦN(v0,γ)
∂v0corresponds to the
number of links in the network, while −∂ΦN(v0,γ)
∂γis the sum of the distances corresponding
to the links in g. These quantities allow us to study aggregate characteristics of the net-
work formation process. For example, for a given non-empty network, the average distance
between neighbors is given by
∂ΦN(v0, γ)
∂v0−1∂ΦN(v0, γ)
∂γ
. (49)
We can study how the behavior of these quantities scales as Nincreases. In particular,
it is useful to study the case where the process yields dense networks. An important concept
in this scenario is that of extensive functions.
Definition 3. A function q(N) is said to be extensive if
lim
N→∞q(N)
N2=K (50)
for some finite non-zero K.
Lemma 4 characterizes the behavior of the average distance in terms of the limiting
partition function.
Lemma 4. Suppose thatD
∂ΦN(v0,γ)
∂v0E
andD
∂ΦN(v0,γ)
∂γE
are extensive, and that they converge
to∂ζ(v0,γ)
∂v0and∂ζ(v0,γ)
∂γ, respectively, when divided by N2. Additionally, suppose that
lim
N→∞1
N2"*∂ΦN(v0, γ)
∂v02+
−∂ΦN(v0, γ)
∂v02#
=∂2ζ(v0, γ)
∂v2
0, (51)
lim
N→∞1
N2"*∂ΦN(v0, γ)
∂γ2+
−∂ΦN(v0, γ)
∂γ2#
=∂2ζ(v0, γ)
∂γ2, (52)
and that these quantities are finite, and that
lim
N→∞πN(∅) = 0 , (53)
21converging faster than 1/Nmfor all m∈N. Then we have that
lim
N→∞*∂ΦN(v0, γ)
∂v0−1∂ΦN(v0, γ)
∂γG̸=∅+
=∂ζ(v0, γ)
∂v0−1∂ζ(v0, γ)
∂γ
,(54)
where ⟨·|G̸=∅⟩denotes the ensemble average conditional on networks having at least one
link.
Using the result in Lemma 4, we can characterize both the average link density and the
average distance between neighbors by analyzing the limiting partition function. Denote the
average link density with µand the average distance in the network with η. If the conditions
in the lemma are satisfied, we have that
µ(v0, γ) =∂ζ(v0, γ)
∂v0,
η(v0, γ) =−∂ζ(v0, γ)
∂v0−1∂ζ(v0, γ)
∂γ
. (55)
I will use these quantities to compare the behavior of the network formation process when
agents have discrete types and when they have continuous types.
5.1.1 Discrete-type model
I first consider consider a model where there are Cdistinct groups of people. Let Θ =
{1, . . . , C }denote the set of these groups and ( Mr)r∈Cbe a partition of N, such that i∈ M r
if and only if individual iis in group r, and let Nr≡ |M r|. Additionally, let θidenote the
group to which individual ibelongs.
Let the distance between two individuals only depend on the group they are in, such
that Dij=˜Dθi,θj. Additionally, I consider the case where the fractions of agents in group
rconverges to wrasN→ ∞ . Link formation probabilities here are independent. This
corresponds to a stochastic block model with the probability associated to forming a link
between individuals in groups randsbeing given by a logit probability with argument
v0−γ˜Dr,s. This model will serve as a benchmark to compare to more complex network
formation models.
22For this case, the generating function of a network gwould be given by
ΦN(g;v0, γ) =X
r∈ΘX
s∈Θ(v0−γ˜Dr,s)lrs(g), (56)
where lrs(g) is the number of links individuals of group rhave established with individuals
of group s. The limiting partition function, then, is given by
ζdisc(v0, γ) =X
r∈ΘX
s∈Θwrwslog
1 +ev0−γ˜Dr,s
. (57)
The partition function in this case has a simple closed form, and the model satisfies the
conditions stated in Lemma 4. This will allow us to compare the aggregate behavior of this
model to the one with continuous types.
5.1.2 Continuous-type model
Now I consider a model where Θ is continuous, which can correspond to a continuous char-
acteristic such as income, such that Θ =
θ,θ
, with θ > θ . The distance between two
agents is now given by some bounded continuous function of their characteristics, such that
Dij=D(θi, θj). Suppose agents characteristics are distributed with a density ρ(θ) in the
limit N→ ∞ , such that
lim
∆θ→01
∆θlim
N→∞1
NMN(θ, θ+ ∆θ) =ρ(θ), (58)
where MN(x, y) is the number of individuals with types in [ x, y] when there are Ntotal
individuals. The limiting partition function, then, is given by
ζcont(v0, γ) = 
θ−θ2Z
Θ2ρ(θ)ρ(θ′) log
1 +ev0−D(θ,θ′)
dθ dθ′(59)
As an example, we can calculate the partition function for the uniform case. To guarantee
symmetry between agents, characteristics will be located on a circle with circumference L,
23such that θj=jL/(N+ 1). The distance between agents is
Dij= min {|θi−θj|, L− |θi−θj|}.
A visualization of this distance is given in Figure 2. The partition function in this case is
ζcont(v0, γ) =

2
Lγ
Li2(−ev0)−Li2(−ev0−Lγ/2)
ifγ >0
log(1 + ev0) if γ= 0,
where Li 2is the dilogarithm function.
Figure 2: Distance in the uniform continuous-type model
. . .θ1
θ2
θ3
θ4
θ5θN
θN−1
θN−2
θN−3D(θ1, θN−1)
D(θ1, θ
4)
Note: The illustrated example holds for N > 10.
I now compare network link densities and average distances for a discrete-type and a
continous-type model where the average distance between agents is the same. Specifically, I
consider the case of two groups with w1=w2=1
2and ˜Dr,s= 1{r=s}for the discrete-type
model, and a uniform distribution with L= 2 for the continuous-type model. This yields
an average distance of 1 /2 when considering all possible agent interactions. I calculate the
24average link density and distance between neighbors for various parameter values to analyze
how individual sensitivities to others’ characteristics reflect themselves on average. The
results are shown in Figures 3 and 4.
Figure 3: Average link density
(a) Discrete-type model
−5 0 5
v00.000.250.500.751.00µdisc
0.101.082.063.044.025.00
γ (b) Continuous-type model
−5 0 5
v00.000.250.500.751.00µcont
0.101.082.063.044.025.00
γ
Figure 4: Average distance between neighbors
(a) Discrete-type model
−5 0 5
v00.00.10.20.30.40.5ηdisc
0.101.082.063.044.025.00
γ (b) Continuous-type model
−5 0 5
v00.00.10.20.30.40.5ηcont
0.101.082.063.044.025.00
γ
These results show that the link density behaves similarly for both models when vary-
ing the model parameters. However, a significant difference emerges when considering the
average distance between neighbors. For a given set of parameters for which γ > 0, we
have that the discrete-type model has a lower distance between neighbors compared to the
continuous-type model. This is because in the discrete-type setting, individuals have the
choice of associating mostly with people of the same type, whereas in the continuous-type
case, even if individuals form links with the people closest to them, they have to interact with
25people who are increasingly further away if they want to establish more links. This means
that the variety in the continuous-type setting leads to more diverse groups of neighbors for
individuals.
5.1.3 Group-size preferences
The previously analyzed models included preferences based only on agent types and disre-
garded the network structure. However, there are non-trivial examples of network formation
processes where a generating function (or potential) can be constructed that can be analyzed
under the same framework. While there is work considering more complex processes under
which a potential can be associated to a network, as in [Mele, 2017], I will analyze processes
in which this non-triviality enters through the out-degree of the individuals. This will allow
me to both expand the model to allow for a more realistic utility specification, as well as
provide a framework to estimate effects of the dynamics of network formation using static
network data.
To include some of these network formation preferences in this analysis, I will study the
dynamics of a model with the following utility specification for a network over Nindividuals:
Vi(g) =X
j∈Ni(g)[v0−γDij] +BN(|Ni(g)|), (60)
where BN: N→ Ris an arbitrary function that is bounded for any N(although this bound
can depend on N). Without loss of generality, let us assume that BN(0) = 0, so as to
normalize the utility of the empty network to 0. For any such function, the above utility
specification corresponds to a model that satisfies the properties in Proposition 1, meaning
that a generating function can be associated to it. An example of this type of model is one
where there is a decreasing marginal utility in the number of neighbors, which would allow
for the model to not generate dense networks, in contrast to the previous specification. This
would be a more realistic model for friendship networks, since individuals tend to have a
limited number of friends, regardless of how large their pool of potential friends grows.
Using the results in Proposition 2, the generating function for the utility specification
26above is given by
ΦN(g;v0, γ) =X
ij∈g[v0−γDij] +X
i∈NBN(|Ni(g)|). (61)
In the example with discrete types, both the generating function and the partition function
can be simplified. The generating function is
ΦN(g;v0, γ) =X
r∈ΘX
i∈Mr(X
s∈Θ[v0−γ˜Dr,s]nis(g) +BN X
s∈Θnis(g)!)
, (62)
where nis(g) is the number of links individual ihas established with individuals of group s.
The corresponding finite-size partition function is
ZN(v0, γ) =Y
r∈Θ
 Ns−δrsX
lrs=0!
s∈Θ"Y
s∈Θlrs
Ns−δrs#
exp X
q∈Θ[v0−γ˜Dr,q]lrq+BN X
q∈Θlrq!!
Nr
,
(63)
where δrsis the Kronecker delta, and I have used the following summation convention:
 Ns−δrsX
lrs=0!
s∈Θ=N1−δr1X
lr1=0···NC−δrCX
lrC=0. (64)
While this model has an associated stationary distribution given by Proposition 1, it
is more difficult to obtain a closed-form solution to the partition function than in the
previous examples. However, calculating the partition function corresponds to calculat-
ingNQ
r∈Θ(Nr+ 1) distinct terms, which is a significant improvement with respect to the
original sum, which contained 2N(N−1)terms. Given that even this calculation can become
intractable for estimation, in the following application I explore a model which allows for a
more simple characterization of the partition function and ensemble averages.
275.2 A simple international trade model
I will now consider a model of trade where some characteristics of large-scale trade networks
can be inferred from individual preferences to trade. Similar to the model in the previous
application, individuals will be classified into Cgroups. Here, individuals are firms and the
groups correspond to countries. The costs of forming links with firms in other countries
will now correspond to actual transportation and coordination costs, such that the distance
measure in this case corresponds to a more tangible attribute of the interaction.
I will consider the formation of trade routes as a unilateral decision. A richer model is
obtained if bilateral decisions are taken into account, but it does not allow for an application
of the framework described here. The model is an application of the class of models analyzed
in Section 5.1.3, where the utilities include a convex cost to forming links:
Vi(g) =X
j∈Ni(g)[v0−γDij]−c
N|Ni(g)|2. (65)
Here, γcaptures the distance-dependent fixed costs of establishing a given route and c >0
indirectly captures the budget constraint of the firm. This cost reflects that a larger a firm’s
network is, the more costly it is to establish a connection with other firms. This model could
potentially be accommodated to allow for benefits of networking, which would decrease the
costs of adding routes the bigger a firm’s network is.
Given that this model is of the form discussed in Section 5.1.3, it satisfies the conditions
in Proposition 1. The associated generating function is given by
ΦN(g;v0, γ, c) =X
r∈ΘX
s∈Θh
v0−γ˜Dr,si
lrs(g) +c
NX
i∈N|Ni(g)|2. (66)
The structure of this generating function results in a partition function whose logarithm
scales as N2, meaning that the limiting partition function can be calculated. In particular,
the model is a dense network formation process where the network structure does enter the
utility of forming new links, in contrast to the simple homophily models discussed previously.
Even though the calculation of the partition function cannot be done through direct methods,
like in the previous examples, results from large deviations theory like the ones used in
28[Mele, 2017] can be used to obtain the limiting behavior of the stationary distribution. In
particular, it is of interest to analyze the limiting behavior of the normalized trade from
country rtoward country s, defined in the finite case as
Trs,N(g) =P
ij∈g 1{θi=r} 1{θj=s}
Nr(Ns−δrs)(67)
Proposition 4. Define H(p)≡ −plog(p)−(1−p) log(1 −p). The limiting partition function
in the trade model, then, is given by
ζtrade(v0, γ, c) =X
r∈Θwrmax
xr∈(0,1)C

X
s∈Θws[vrsxrs+H(xrs)]−c X
s′∈Θws′xrs′!2

, (68)
where
vrs=v0−γ˜Dr,s. (69)
Furthermore, the average trade between countries randsis given by
Trs≡lim
N→∞⟨Trs,N⟩=h
1 +Ar(c)eγ˜Dr,s−v0i−1
, (70)
where Aris a positive function that is increasing in c.
Proposition 4 provides a non-trivial characterization of the aggregate long-run behavior of
the trade model. Having characterized the limiting partition function, additional aggregate
statistics such as the average distance between trading firms can be obtained, giving a rich
description of the macroeconomic system. Additionally, note that the expression for Trsin
Proposition 4 resembles a gravity equation of trade, showing that such a relation can not
only be obtained by complexity in the goods being traded, as in [Eaton and Kortum, 2002],
but can arise in a simple one-good economy from the dynamics of how trade routes are
established.
296 Uses for Empirical Estimation
In the absence of dynamic data, estimations of the determinants of link formation in net-
works tend to focus on the static characteristics of individuals. While this approach allows
researchers to analyze the dependence of network structure on individual characteristics, an
inclusion of the dynamics of network formation in the analysis would provide both a cleaner
estimation of static effects and reveal the relative importance of dynamic effects.
While there has been previous work in incorporating dynamics of networks into structural
estimation, these methods tend to entail a large computational cost as noted in [Mele, 2017].
This implies that estimation is limited to networks over groups of size of the order of hundreds
of individuals. Given the increasing availability of data on large networks, ranging between
tens of thousands and millions of individuals, it is of interest to explore methods that allow
for the use of the richness of such large data samples in structural estimation.
My previous analysis provides a closed-form expression for the stationary distribution of
a stochastic network formation process. Specifically, for a process of homophilic friendship
formation, the structure of the model is sufficiently compact to allow an explicit calculation
of the probabilities without having to sum over all networks. If there are Cdistinct groups,
the resulting calculation of the probability of observing a given network scales as NQ
r∈ΘNr,
which is drastically slower than the size of the network space, given that it scales as 2N2.
Additionally, large deviations arguments such as the one used in Section 5.2 allow for an
additional reduction in computational costs. While this imposes restrictions on the com-
plexity of the model, it allows for a tractable incorporation of dynamics into the structural
estimation of determinants of network formation.
Estimation of parameters in such a model can be done via maximum likelihood. Letting
ωbe the parameters of the model, the log-likelihood function ℓ(ω) is given by
ℓ(ω) = Φ N(g0;ω)−log(ZN(ω)).
Since the likelihood depends only on the generating function and the partition function, the
results obtained in the previous sections can be used to calculate the likelihood function.
Additionally, note that the form of the likelihood function implies that solving for a local
30extremum corresponds to a set of moment conditions. Specifically, we have that
∂ℓ(ω)
∂ωi=∂ΦN(g0;ω)
∂ωi−∂log(ZN(ω))
∂ωi
=∂ΦN(g0;ω)
∂ωi−∂ΦN(ω)
∂ωi
.
As such, maximum likelihood estimation is equivalent to a type of method of moments
estimation using the expectation of the derivatives of the generating function.
7 Conclusion
In this paper I have presented sufficient conditions to get a generating function for an ar-
bitrary network formation process where links are individually evaluated. When these con-
ditions are satisfied, I show how aggregate characteristics of the long-run behavior of the
system can be obtained from a partition function associated to the process.
I applied this framework to simple models of homophily and international trade. In
the case where networks are dense, I was able to find a close form of aggregate quantities,
such as the average distance between neighbors and the density of trade routes between two
countries, in terms of the parameters dictating the dynamic network formation process. In
particular, in the homophily setting I find that people tend to form links with others if they
are in a continuum of types than if they have a discrete set of types. I also find that a
gravity-like equation is satisfied by the trade-route density in the international trade model,
showing that it can arise even in settings where the economy is relatively simple.
References
[Amann, 1990] Amann, H. (1990). Ordinary Differential Equations . De Gruyter.
[Bala and Goyal, 2000] Bala, V. and Goyal, S. (2000). A Noncooperative Model of Network
Formation. Econometrica , 68(5):1181–1229.
31[Butts, 2009] Butts, C. T. (2009). Using Potential Games to Parameterize ERG Models.
Working Paper .
[Currarini et al., 2009] Currarini, S., Jackson, M. O., and Pin, P. (2009). An Economic
Model of Friendship: Homophily, Minorities, and Segregation. Econometrica , 77(4):1003–
1045.
[Eaton and Kortum, 2002] Eaton, J. and Kortum, S. (2002). Technology, Geography, and
Trade. Econometrica , 70(5):1741–1779.
[Elstrodt, 1996] Elstrodt, J. (1996). Maß- und Integrationstheorie . Springer-Lehrbuch.
Springer Berlin Heidelberg, Berlin, Heidelberg.
[Glauber, 2004] Glauber, R. J. (2004). Time-Dependent Statistics of the Ising Model. Jour-
nal of Mathematical Physics , 4(2):294.
[Golub and Jackson, 2012] Golub, B. and Jackson, M. O. (2012). How Homophily Affects
the Speed of Learning and Best-Response Dynamics. The Quarterly Journal of Economics ,
127(3):1287–1338.
[Gould and Tobochnik, 2010] Gould, H. and Tobochnik, J. (2010). Statistical and thermal
physics : with computer applications . Princeton University Press.
[Jackson and Watts, 2001] Jackson, M. and Watts, A. (2001). The existence of pairwise
stable networks. Seoul Journal of Economics , 14(3):299–321.
[Jackson et al., 2012] Jackson, M. O., Rodriguez-Barraquer, T., and Tan, X. (2012). Social
Capital and Social Quilts: Network Patterns of Favor Exchange. American Economic
Review , 102(5):1857–97.
[Jackson and Watts, 2002] Jackson, M. O. and Watts, A. (2002). The Evolution of Social
and Economic Networks. Journal of Economic Theory , 106(2):265–295.
[McPherson et al., 2001] McPherson, M., Smith-Lovin, L., and Cook, J. M. (2001). Birds of
a Feather: Homophily in Social Networks. Annual Review of Sociology , 27:415–444.
32[Mele, 2017] Mele, A. (2017). A Structural Model of Dense Network Formation. Economet-
rica, 85(3):825–850.
[Monderer and Shapley, 1996] Monderer, D. and Shapley, L. S. (1996). Potential Games.
Games and Economic Behavior , 14(1):124–143.
[Norris, 1997] Norris, J. R. (1997). Continuous-time Markov chains II. In Markov Chains ,
pages 108–127. Cambridge University Press.
[Park and Newman, 2004] Park, J. and Newman, M. E. J. (2004). Statistical mechanics of
networks. Physical Review E , 70(6):066117.
[Pollard, 2001] Pollard, D. (2001). A User’s Guide to Measure Theoretic Probability. A
User’s Guide to Measure Theoretic Probability .
[Rosenthal, 2006] Rosenthal, J. S. (2006). A first look at rigorous probability theory . World
Scientific Publishing Co., 2 edition.
33Appendix
A Proofs
A.1 Proof of Lemma 1
Since the switching probabilities are non-degenerate, there is always a positive probability
to switch the state of a dyad. Given that any network can be reached from any other by
switching the states of dyads, this implies that there is a positive probability of reaching any
network in a finite set of steps and, therefore, the Markov chain is irreducible. Additionally,
since the state space is finite, the chain is positive recurrent. Finally, states have a non-
zero probability to transition to themselves, therefore the chain is aperiodic. Therefore,
using Corollary 8.3.11 in [Rosenthal, 2006], we conclude that a stationary measure exists, is
unique, and satisfies lim t→∞πt(g) =π(g) for all g∈ G.
A.2 Proof of Lemma 2
First note that one of the implications is easily obtained. If ϕis conservative, the first
property can be obtained by comparing the paths g→σij(g)→gandg→σij(g)→g→
σij(g)→g. This yields
ϕij(g) +ϕij(σij(g)) =ϕij(g) +ϕij(σij(g)) +ϕij(g) +ϕij(σij(g))
=⇒ ϕij(g) =−ϕij(σij(g)). (71)
The second property can be obtained by comparing the paths g→σij(g)→σi′j′◦σij(g) and
g→σi′j′(g)→σij◦σi′j′(g). Since σi′j′◦σij(g) =σij◦σi′j′(g), conservativeness implies that
ϕij(g) +ϕi′j′(σij(g)) =ϕi′j′(g) +ϕij(σi′j′(g)). (72)
34Now I show that if ϕsatisfies the properties, then it is conservative. Let g∈ G and
i1j1, . . . , i MjMbe an arbitrary sequence of dyads. Define
gn≡ nY
m=1σimjm!
(g). (73)
Additionally, define g0≡gandg≡gM. With these definitions, define the sum
S=MX
m=1ϕimjm" m−1Y
n=1σinjn!
(g)#
=MX
m=1ϕimjm(gm−1). (74)
We can first prove that this sum is invariant under permutations of the order of the links.
This is clearly true for M= 1, so I will focus on the case M≥2. For ˜ m < M , define the
modified sequence
i′
mj′
m=

imjm ifm /∈ {˜m,˜m+ 1},
i˜m+1i˜m+1ifm= ˜m,
i˜mi˜m ifm= ˜m+ 1.(75)
This corresponds to the sequence where links in the positions ˜ mand ˜m+ 1 have been
switched. Define the networks associated to this sequence of links in an analogous man-
ner to the previous sequence:
g′
n≡ nY
m=1σi′mj′m!
(g). (76)
35Note that, given the definition of the new sequence, we have that g′
n=gnforn≤˜m−1.
Additionally, we have that the switching operators commute, such that
g′
˜m+1=σi′
˜m+1j′
˜m+1◦σi′
˜mj′
˜m(g′
˜m−1)
=σi′
˜mj′
˜m◦σi′
˜m+1j′
˜m+1(g′
˜m−1)
=σi˜m+1j˜m+1◦σi˜mj˜m(g′
˜m−1)
=σi˜m+1j˜m+1◦σi˜mj˜m(g˜m−1)
=g˜m+1. (77)
Given that the links sequences coincide for n >˜m+1, this implies that we also have g′
n=gn
forn≥˜m+ 1. The networks, therefore, satisfy
g′
m=

gm ifm̸= ˜m,
σi˜m+1j˜m+1(g˜m−1) if m= ˜m.(78)
This, then, implies that for m /∈ {˜m,˜m+ 1},
ϕi′mj′m(g′
m−1) =ϕimjm(gm−1). (79)
This implies that
MX
m=1ϕimjm(gm−1)−MX
m=1ϕi′mj′m(g′
m−1)
=ϕi˜mj˜m(g˜m−1) +ϕi˜m+1j˜m+1(g˜m)−ϕi′
˜mj′
˜m(g′
˜m−1)−ϕi′
˜m+1j′
˜m+1(g′
˜m) (80)
36Now, because of the second property, we have that the terms in the sum at positions ˜ mand
˜m+ 1 satisfy
ϕi˜mj˜m(g˜m−1) +ϕi˜m+1j˜m+1(g˜m) =ϕi˜mj˜m(g˜m−1) +ϕi˜m+1j˜m+1(σi˜mj˜m(g˜m−1))
=ϕi˜m+1j˜m+1(g˜m−1) +ϕi˜mj˜m(σi˜m+1j˜m+1(g˜m−1))
=ϕi′
˜mj′
˜m(g˜m−1) +ϕi′
˜m+1j′
˜m+1(σi˜m+1j˜m+1(g˜m−1))
=ϕi′
˜mj′
˜m(g′
˜m−1) +ϕi′
˜m+1j′
˜m+1(g′
˜m). (81)
We, therefore, conclude that
MX
m=1ϕimjm(gm−1) =MX
m=1ϕi′mj′m(g′
m−1). (82)
This means that we can switch the order of two links in the sequence and the sum does not
change. Since any permutation of the links can be achieved via a sequence of switches of
adjacent links, this implies that Sis invariant under permutations of the sequence of dyads.
We can use the previous result to prove that, if a given link appears in the sequence twice,
the sum Sremains the same if these two entries in the sequence are removed. Suppose the
first instance of the repeated link occurs at position ˆ m1and the second one occurs at ˆ m2.
If ˆm2>ˆm1, we can repeatedly apply the previous result to show that Sremains the same
if we switch the second instance of the repeated link with the previous link in the sequence
until it is at position ˆ m1+ 1. Denote the sequence of links where the two instances of the
links are adjacent with ˆi1ˆj1, . . . , ˆiMˆjMand denote the corresponding sequence of networks
with{ˆgm}M
m=0. We have that
S=MX
m=1ϕˆimˆjm(ˆgm−1)
=ϕˆiˆm1ˆjˆm1(ˆgˆm1−1) +ϕˆiˆm1+1ˆjˆm1+1(ˆgˆm1) +ˆm1−1X
m=1ϕˆimˆjm(ˆgm−1) +MX
m= ˆm1+2ϕˆimˆjm(ˆgm−1).(83)
37Now, we have that ˆiˆm+1ˆjˆm+1=ˆiˆmˆjˆm. Therefore, we have that
ϕˆiˆm1ˆjˆm1(ˆgˆm1−1) +ϕˆiˆm1+1ˆjˆm1+1(ˆgˆm1) =ϕˆiˆm1ˆjˆm1(ˆgˆm1−1) +ϕˆiˆm1ˆjˆm1(ˆgˆm1)
=ϕˆiˆm1ˆjˆm1(ˆgˆm1−1) +ϕˆiˆm1ˆjˆm1(σˆiˆm1ˆjˆm1(ˆgˆm1−1))
= 0, (84)
by the first property in the Lemma. This yields
S=ˆm1−1X
m=1ϕˆimˆjm(ˆgm−1) +MX
m= ˆm1+2ϕˆimˆjm(ˆgm−1). (85)
Now, note that
ˆgˆm1+1=σˆiˆm1+1ˆjˆm1+1◦σˆiˆm1ˆjˆm1(ˆgˆm1−1)
=σˆiˆm1ˆjˆm1◦σˆiˆm1ˆjˆm1(ˆgˆm1−1)
= ˆgˆm1−1. (86)
We can define a sequence ˜i1˜j1, . . . , ˜iM2˜jM−2ofM−2 dyads given by
˜im˜jm=

ˆimˆjm ifm≤ˆm1−1,
ˆim+2ˆjm+2ifm≥ˆm1.(87)
Defining {˜gm}M−2
m=0analogously to the previous sequences of networks, we have that
˜gm=

ˆgm ifm≤ˆm1−1,
ˆgm+2ifm≥ˆm1.(88)
This implies that Ssatisfies
S=M−2X
m=1ϕ˜im˜jm(˜gm−1). (89)
As such, we have that Sis invariant under the removal of repeated links.
38With the above result we have that sums constructed from a sequence of dyads, like S,
can be reduced to a sequence that includes the dyads that appear an odd number of times in
the sequence, and only includes these dyads once. This is because if a dyad appears an even
number of times, it can be removed from the sequence in pairs with the previous scheme,
and an odd number of repeated dyads can be reduced to one dyad in the same manner. Let
∆(g,g) be the set of dyads by which gandgdiffer. That is,
∆(g,g) = (g\g)∪(g\g). (90)
Since Scan be reduced to a sum constructed from a sequence i1j1, . . . , iMjMwhere each
dyad appears only once, and that gmust satisfy
g=
MY
m=1σimjm
(g), (91)
it must be true that the sequence is an ordering of the set ∆( g,g). Given that Sis invariant
under permutations of the sequence of dyads used to construct it, we conclude that any
ordering of ∆( g,g) yields the same value of the sum. Since any sequence of dyads that
transforms gintogcan be transformed into an ordering of ∆( g,g), we conclude that any of
these sequences yield the same sum. This implies that ϕis conservative.
To construct the Φ function, consider a non-empty network gand an ordering i1j1, . . . , i |g|j|g|
of the dyads in g. From our previous results, we have that the sum
|g|X
n=1ϕinjn n−1[
m=1{imjm}!
, (92)
is invariant under permutations of the dyads. This means that the value of the sum depends
only on the set of dyads, which is precisely g. Therefore, the sum above is only a function
ofg, not of the ordering of the links. To define this function for all networks, we can set an
39arbitrary value ˜Φ(∅) and define the function for the non-empty networks by
˜Φ(g) =˜Φ(∅) +|g|X
n=1ϕinjn n−1[
m=1{imjm}!
. (93)
We can now evaluate ˜Φ(σij(g)) for some ij∈ D. Ifij /∈g, we can organize the sequence of
dyads used to construct ˜Φ(σij(g)) such that ijis the last one and all the other dyads follow
the previous ordering of g. We would, therefore, have that
˜Φ(σij(g)) = ˜Φ(∅) +|g|X
n=1ϕinjn n−1[
m=1{imjm}!
+ϕij(g)
=˜Φ(g) +ϕij(g). (94)
For the case ij∈g, we can use a new ordering i′
1j′
1, . . . , i′
|g|j′
|g|such that i′
|g|j′
|g|=ij. We,
therefore, have that
˜Φ(g) =˜Φ(∅) +|g|X
n=1ϕi′nj′n n−1[
m=1{i′
mj′
m}!
=˜Φ(∅) +|g|−1X
n=1ϕi′nj′n n−1[
m=1{i′
mj′
m}!
+ϕij(σij(g)). (95)
Note that the dyads in the first sum constitute an ordering of the dyads in σij(g). Using this
and the first property ϕstated in the Lemma, we have that
˜Φ(g) =˜Φ(σij(g)) +ϕij(σij(g))
=˜Φ(σij(g))−ϕij(g). (96)
In both of these cases, we have that ˜Φ satisfies
˜Φ(σij(g))−˜Φ(g) =ϕij(g). (97)
40To show that this function is unique, consider another function ˆΦ that satisfies
ˆΦ(σij(g))−ˆΦ(g) =ϕij(g) (98)
for all g∈ Gandij∈ DAdditionally, suppose ˜Φ(∅) =ˆΦ(∅) and there exists a g0such that
˜Φ(g0)̸=ˆΦ(g0). We have that, for all g∈ Gandij∈ D
˜Φ(g)−ˆΦ(g) = [˜Φ(g) +ϕij(g)]−[ˆΦ(g) +ϕij(g)]
=˜Φ(σij(g))−ˆΦ(σij(g)). (99)
Since this procedure can be repeated with any sequence of dyads to reach any network,
we conclude that ˜Φ(g)−ˆΦ(g) is the same for all networks. Specifically, ˜Φ(g0)−ˆΦ(g0) =
˜Φ(∅)−ˆΦ(∅) = 0, which is a contradiction. We, therefore, have that ˜Φ is the unique function
satisfying Equation (97) for a fixed value ˜Φ(∅).
A.3 Proof of Proposition 1
I first prove the following 3 implications:
•Existence of Φimplies conservativeness of ϕ: We have that the function Φ satisfies
Φ(σij(g))−Φ(g) = logpij(g)
pij(σij(g))
=ϕij(g). (100)
This implies that, for any g∈ Gandij, i′j′∈ D,
ϕij(g) +ϕi′j′(σij(g)) = [Φ( σij(g))−Φ(g)] + [Φ( σi′j′◦σij(g))−Φ(σij(g))]
= Φ(σi′j′◦σij(g))−Φ(g)
= [Φ( σi′j′(g))−Φ(g)] + [Φ( σi′j′◦σij(g))−Φ(σi′j′(g))]
= [Φ( σi′j′(g))−Φ(g)] + [Φ( σij◦σi′j′(g))−Φ(σi′j′(g))]
=ϕi′j′(g) +ϕij(σi′j′(g)), (101)
where I used the fact that the switching operators commute: σij◦σi′j′(g) =σi′j′◦σij(g).
41By Lemma 2, this implies that ϕis conservative.
•Conservativeness of ϕimplies reversibility of the process: By Lemma 2, we have that
conservativeness of ϕimplies the existence of a function Φ, given by the construction
in Lemma 2, that satisfies
Φ(σij(g))−Φ(g) =ϕij(g) = logpij(g)
pij(σij(g))
. (102)
We, therefore, have that
qijpij(g)eΦ(g)=qijpij(σij(g))pij(g)
pij(σij(g))
eΦ(g)
=qijpij(σij(g))eΦ(σij(g))−Φ(g)eΦ(g)
=qijpij(σij(g))eΦ(σij(g)). (103)
Define the following probability distribution over the space of networks:
˜π(g) =eΦ(g)
P
g′∈GeΦ(g′). (104)
Dividing the previous expression byP
g′∈GeΦ(g′), we have that
qijpij(g)˜π(g) =qijpij(σij(g))˜π(σij(g)). (105)
Note that this corresponds to the detailed balance condition for the network formation
process, since the only non-zero transition probabilities correspond to pairs of networks
that differ by only one link. Satisfying detailed balance implies that ˜ πis a stationary
distribution of the Markov chain. By Lemma 1, there is a unique stationary distribution
of the process, which means that ˜ πis the unique stationary distribution. Since ˜ π
satisfies the detailed balance condition, we conclude that the process is reversible.
•Reversibility of the process implies existence of Φ:Since the switching probabilities
are non-degenerate, by Lemma 1, there exists a unique non-degenerate stationary
distribution πto which the system converges. If the process is reversible, it satisfies
42the detailed balance condition:
qijpij(g)π(g) =qijpij(σij(g))π(σij(g)). (106)
Since the stationary distribution has full support, we have that
log(π(σij(g)))−log(π(g)) = logpij(g)
pij(σij(g))
=ϕij(g). (107)
Since the stationary probabilities are a function of the network only, we have that any
function
Φ(g) =C+ log( π(g)), (108)
forC∈R, will satisfy
pij(g)
pij(σij(g))= exp(Φ( σij(g))−Φ(g)). (109)
Using the proof of the second implication, we have that the function Φ constructed in Lemma
2 characterizes the stationary distribution of the chain. Namely, the stationary distribution
is given by Equation (104).
A.4 Proof of Proposition 2
Suppose the network formation process is reversible. Using Proposition 1, we have that there
exists a function Φ such that, for all networks and dyads,
logpij(g)
pij(σij(g))
= Φ(σij(g))−Φ(g). (110)
If the probabilities are generated from a discrete choice process, we have that
Φ(σij(g))−Φ(g) = logF1(Vi(σij(g))−Vi(g))
F1(Vi(g)−Vi(σij(g)))
. (111)
43Due to the symmetry in the definition of F1, we have that
F1(−x) = 1−F1(x). (112)
Additionally, since F0is non-negative, we have that F1satisfies
F1(0) =1
2,
F1(x)<1
2forx <0,
F1(x)>1
2forx >0. (113)
As such, we have that
logF1(Vi(σij(g))−Vi(g))
F1(Vi(g)−Vi(σij(g)))
>0⇐⇒ Vi(σij(g))> V i(g). (114)
This implies that
Φ(σij(g))−Φ(g)>0⇐⇒ Vi(σij(g))> V i(g). (115)
We, therefore, conclude that Φ is an ordinal potential of the deterministic game.
IfF0corresponds to a T1EV distribution, we have that,
logF1(x)
F1(−x)
=x. (116)
Therefore, we have that in the case of a reversible process, the following is satisfied for all
networks and dyads:
Φ(σij(g))−Φ(g) =Vi(σij(g))−Vi(g)). (117)
We, therefore, conclude that Φ is an exact potential of the deterministic game. Conversely,
if the deterministic game is an exact potential game, then there exists a function Qsuch
44that
Q(σij(g))−Q(g) =Vi(σij(g))−Vi(g)). (118)
Now, we have that
Vi(σij(g))−Vi(g)) = logF1(Vi(σij(g))−Vi(g))
F1(Vi(g)−Vi(σij(g)))
= logpij(g)
pij(σij(g))
. (119)
As such, this means that Qsatisfies
pij(g)
pij(σij(g))= exp( Q(σij(g))−Q(g)). (120)
Following Proposition 1, this implies that the process is reversible, and that Qis a generating
function of the stationary distribution.
In the case where the schocks follow a T1EV distribution and the process is reversible,
we have that the generating function can be constructed as
Φ(g) = Φ( ∅) +|g|X
n=1ϕinjn n−1[
m=1{imjm}!
, (121)
where i1j1, . . . , i |g|j|g|is an arbitrary ordering of the dyads in g, and ϕis given by
ϕij(g) =Vi(σij(g))−Vi(g)). (122)
The dyads in gcan be ordered such that the dyads originating from any given node are
adjacent. Defining i1, . . . , i Nas an arbitrary ordering of N,gn≡gn−1∪S
j∈Ni(g){inj}
,
with g0≡∅, as the corresponding networks including the neighbors of each node, and
45jm
1, . . . , jm
|Ni(g)|as an arbitrary ordering of the neighbors of i, Φ(g) can be written as
Φ(g) = Φ( ∅) +NX
m=1|Ni(g)|X
l=1"
Vim 
gm−1∪"l[
k=1{imjm
k}#!
−Vim 
gm−1∪"l−1[
k=1{imjm
k}#!#
.
(123)
Note that the inner sum is telescopic, which yields
Φ(g) = Φ( ∅) +NX
m=1
Vim
gm−1∪
|Ni(g)|[
k=1{imjm
k}

−Vim(gm−1)

= Φ(∅) +NX
m=1(Vim(gm)−Vim(gm−1)). (124)
A.5 Proof of Lemma 3
The equivalence of statements 1 and 2 in Proposition 1 only depend on the set of switching
probabilities, which is common to the discrete and continuous-time processes.
The irreducibility and aperiodicity properties of P(q/q) hold for A(λ/λ), and these are
sufficient to guarantee convergence of the process [Norris, 1997]. Now, note that a stationary
distribution under the discrete-time evolution will be a stationary distribution under the
continuous-time evolution by taking q=sλ/λfor some s∈(0,1). Note that in this case we
have q=ssoq/q=λ/λ. We have that
π=P(q/q)π⇐⇒ π= (I+sA(λ/λ))π
⇐⇒ A(λ/λ)π=0,
since s >0. Additionally, we have that λ/λconstitutes a distribution with full support
overD. As such, the stationary distribution in Proposition 1 will also be the stationary
distribution for the continuous-time process, since it is the same for any distribution qwith
full support over D.
46A.6 Proof of Proposition 3
Consider the vector in x≡((xi(g))i∈N)G∈RN×|G|. Define the function T:RN×|G|→RN×|G|
by
[T(x)]i(g) =X
g′∈Gvi(g′)˜P(g′, g|β,x), (125)
where
˜P(g′, g|β,x) =βZ∞
0e−βtP{Gt=g′|G0=g, β,x}dt, (126)
andP{Gt=g′|G0=g, β,x}are the probabilities induced by the discrete choice dynamics.
Note that these time-weighted probabilities satisfy
X
g′∈G˜P(g′, g|β,x) =βZ∞
0e−βt"X
g′∈GP{Gt=g′|G0=g, β,x}#
dt
=βZ∞
0e−βtdt
= 1. (127)
As such, we have that [ T(x)]i(g) is a convex combination of the vi(g) across all networks,
regardless of x. Define
vi≡min
g∈Gvi(g),
vi≡max
g∈Gvi(g). (128)
We, therefore, have that the image of TisV ≡(Q
i∈N[vi,vi])|G|. Restricting Tto the domain
V ⊂RN×|G|, we conclude that TmapsVto itself.
I now prove that Tis continuous in x. We have that the switching probabilities associated
to a given xare given by
pij(g|x) =F1(xi(σij(g))−xi(g)). (129)
47Since F1is differentiable, we have that the switching probabilities are differentiable in x.
The probability distribution on Gsatisfies the master equation
˙P{Gt=g′|G0=g, β,x}=X
ij∈Dλij"
pij(σij(g′)|x)P{Gt=σij(g′)|G0=g, β,x}
−pij(g′|x)P{Gt=g′|G0=g, β,x}#
, (130)
with initial conditions
P{G0=g|G0=g, β,x}= 1{g′=g}. (131)
Define the function S:G ×[0,1]|G|× V → Rby
S(g,y|x)≡X
ij∈Dλij[pij(σij(g)|x)y(σij(g))−pij(g|x)y(g)]. (132)
Since the switching probabilities are differentiable in x, we have that His differentiable
inx. Additionally, since the switching probabilities are bounded, we also have that His
differentiable in y. We, therefore, have that the function is Lipschitz. Using Theorem 8.3 in
[Amann, 1990], we conclude that the solution of the differential equation P{Gt=g|G0=
g, β,x}is continuous in x. Using continuity of the solution, we have that the integral
˜P{g, g′|β,x}is continuous in x, according to Theorem 5.6 in [Elstrodt, 1996]. This implies
thatTis continuous in x.
Since Tis continuous and maps a convex compact subset of RN×|G|to itself, by Brouwer’s
fixed-point theorem, Tmust have a fixed point. That is, there exists an x∗∈ Vsuch that
x∗
i(g) =X
g′∈Gvi(g′)˜P(g′, g|β,x∗). (133)
As such, a Markov-Perfect Equilibrium exists.
48A.6.1 βn→ ∞ limit
For the βn→ ∞ case, we can bound the values that [ T(x)]i(g) takes for any x∈ V, which
bounds the values the fixed point can take. Using the triangle inequality, we have that
|˙P{Gt=g′|G0=g, β,x}| ≤X
ij∈Dλij"
|pij(σij(g′)|x)P{Gt=σij(g′)|G0=g, β,x}|
+|pij(g′|x)P{Gt=g′|G0=g, β,x}|#
. (134)
Since the probabilities are positive and bounded by 1, this yields
|˙P{Gt=g′|G0=g, β,x}| ≤ 2X
ij∈Dλij. (135)
Integrating, this yields the following bound:
|P{Gt=g′|G0=g, β,x} −P{G0=g′|G0=g, β,x}|=Zt
0P{Gt′=g′|G0=g, β,x}dt′
≤Zt
0|P{Gt′=g′|G0=g, β,x}|dt′
≤2"X
ij∈Dλij#
t. (136)
Additionally, since the probabilities lie in [0 ,1], we have that
|P{Gt=g′|G0=g, β,x} −P{G0=g′|G0=g, β,x}| ≤ 1. (137)
Together, these imply that
|P{Gt=g′|G0=g, β,x} −P{G0=g′|G0=g, β,x}| ≤ min(
2"X
ij∈Dλij#
t,1)
(138)
49Now, we have that
˜P(g′, g|β,x)−P{G0=g′|G0=g, β,x}
=˜P(g′, g|β,x)−βZ∞
0e−βtP{G0=g′|G0=g, β,x}dt
=βZ∞
0e−βt(P{Gt=g′|G0=g, β,x} −P{G0=g′|G0=g, β,x})dt (139)
We, therefore, have that
|˜P(g′, g|β,x)−P{G0=g′|G0=g, β,x}|
≤βZ∞
0e−βt|P{Gt=g′|G0=g, β,x} −P{G0=g′|G0=g, β,x}|dt
≤βZ∞
0e−βtmin(
2"X
ij∈Dλij#
t,1)
dt. (140)
Define
τ≡1
2"X
ij∈Dλij#−1
. (141)
We, then, have that
|˜P(g′, g|β,x)−P{G0=g′|G0=g, β,x}|
≤β 
2"X
ij∈Dλij#Zτ
0e−βtt dt+Z∞
τe−βtdt!
=β 
2"X
ij∈Dλij#1−e−βτ(βτ+ 1)
β2
+e−βτ
β!
=2
β"X
ij∈Dλij#
(1−e−βτ) +e−βτ 
1−2τX
ij∈Dλij!
=2
β"X
ij∈Dλij#
(1−e−βτ)
≤2
β"X
ij∈Dλij#
. (142)
50With this result, we obtain the following bound:
|[T(x)]i(g)−vi(g)|= X
g′∈Gvi(g′)˜P(g′, g|β,x)!
− X
g′∈Gvi(g′) 1{g′=g}!
= X
g′∈Gvi(g′)˜P(g′, g|β,x)!
− X
g′∈Gvi(g′)P{G0=g′|G0=g, β,x}!
=X
g′∈Gvi(g′)(˜P(g′, g|β,x)−P{G0=g′|G0=g, β,x})
≤X
g′∈G|vi(g′)||˜P(g′, g|β,x)−P{G0=g′|G0=g, β,x}|
≤2
β"X
ij∈Dλij#X
g′∈G|vi(g′)|. (143)
Since this bound is independent of x, we have that any fixed point associated to βnmust
satisfy
|Vn
i(g)−vi(g)| ≤2
βn"X
ij∈Dλij#X
g′∈G|vi(g′)|. (144)
We, therefore, have that if βn→ ∞ asn→ ∞ , any fixed point must satisfy
lim
n→∞|Vn
i(g)−vi(g)|= 0. (145)
A.6.2 βn→0limit
Letπ(g|x) denote the stationary distribution for a given vector x. Since the Markov chain
is positive recurrent, as shown in the proof of Lemma 1, we have that every state in the chain
(i.e. every network) is recurrent. As such, the expected time in each network is infinite. For
sufficiently small β, the weighted time average converges to an average over the stationary
distribution of the chain, regardless of the initial state. That is,
lim
β→0[T(x)]i(g) =X
g′∈Gvi(g′)π(g|x). (146)
51This average, however, is independent of g. In particular, this applies to the fixed points of
T. We must, therefore, have that any limit of the fixed points associated to a sequence {βn},
with βn→0, must satisfy
lim
n→∞Vn
i(g) = lim
n→∞Vn
i(g′) (147)
for all i∈ N andg, g′∈ G. If this is satisfied, we must have that all the switching probabilities
converge to 1 /2, since
lim
n→∞pij(g|Vn) = lim
n→∞F1(Vn
i(σij(g))−Vn
i(g))
=F1(0)
=1
2. (148)
This yields
lim
n→∞logpij(σij(g)|Vn)
pij(g|Vn)
= 0. (149)
Following Proposition 1, this corresponds to a conservative function ϕwith a constant gen-
erating function Φ. A constant generating function corresponds to a constant stationary
distribution, which is given by
lim
n→∞π(g|Vn) =1
|G|. (150)
We, therefore, have that
lim
n→∞Vn
i(g) =1
|G|X
g′∈Gvi(g′). (151)
52A.7 Proof of Lemma 4
For a given N, define the random variables
XN(G)≡∂ΦN(G;v0, γ)
∂v0
,
YN(G)≡∂ΦN(G;v0, γ)
∂γ
. (152)
We want to study the behavior of
YN
XNG̸=∅
=X
g∈G\{∅}πN(g)
1−πN(∅)YN(g)
XN(g). (153)
Now, note that convergence of the mean implies convergence in the means conditional on
G̸=∅. We have that
⟨XN|G̸=∅⟩=X
g∈G\{∅}πN(g)
1−πN(∅)
XN(g)
=1
1−πN(∅)[⟨XN⟩ −πN(∅)XN(∅)], (154)
and similarly for YN. Since in our case XN(∅) =YN(∅) = 0 for all N, we have that
lim
N→∞1
N2⟨XN|G̸=∅⟩= lim
N→∞1
1−πN(∅)⟨XN⟩
N2−πN(∅)XN(∅)
N2(1−πN(∅))
=∂ζ(v0, γ)
∂v0, (155)
and similarly for YN.
I now establish that XNconverges in probability to∂ζ(v0,γ)
∂v0, conditional on G̸=∅. We
53have that, for all ϵ >0,
PXN
N2−∂ζ(v0, γ)
∂v0≤ϵG̸=∅
= 1−PXN
N2−∂ζ(v0, γ)
∂v0> ϵG̸=∅
= 1−PXN
N2−1
N2⟨XN|G̸=∅⟩
−∂ζ(v0, γ)
∂v0−1
N2⟨XN|G̸=∅⟩> ϵG̸=∅
≥1−PXN
N2−1
N2⟨XN|G̸=∅⟩+∂ζ(v0, γ)
∂v0−1
N2⟨XN|G̸=∅⟩> ϵG̸=∅
.(156)
Since1
N2⟨XN|G̸=∅⟩converges to∂ζ(v0,γ)
∂v0, we have that there exists an N0such that, for all
N > N 0,
∂ζ(v0, γ)
∂v0−1
N2⟨XN|G̸=∅⟩≤ϵ/2. (157)
Suppose that N > N 0. We, then, have that
PXN
N2−∂ζ(v0, γ)
∂v0≤ϵG̸=∅
≥1−PXN
N2−1
N2⟨XN|G̸=∅⟩> ϵ−∂ζ(v0, γ)
∂v0−1
N2⟨XN|G̸=∅⟩G̸=∅
≥1−PXN
N2−1
N2⟨XN|G̸=∅⟩>ϵ
2G̸=∅
(158)
Using Chebyshev’s inequality, this implies that
PXN
N2−∂ζ(v0, γ)
∂v0≤ϵG̸=∅
≥1−4V(XN/N2|G̸=∅)
ϵ2, (159)
where Vdenotes the variance. Now, we have that
lim
N→∞1
N2[⟨X2
N⟩ − ⟨XN⟩2] =∂2ζ(v0, γ)
∂v2
0. (160)
54Note that we can write
⟨X2
N|G̸=∅⟩=X
g∈G\{∅}πN(g)
1−πN(∅)
X2
N(g)
=1
1−πN(∅)[⟨X2
N⟩ −πN(∅)X2
N(∅)]
=⟨X2
N⟩
1−πN(∅). (161)
This implies that
⟨X2
N|G̸=∅⟩ − ⟨XN|G̸=∅⟩2=⟨X2
N⟩
1−πN(∅)−⟨XN⟩2
[1−πN(∅)]2
=⟨X2
N⟩ − ⟨XN⟩2
[1−πN(∅)]2−πN(∅)⟨X2
N⟩
[1−πN(∅)]2. (162)
Now, since πN(∅) converges to 0 faster than Nmfor all m∈N, we have that
lim
N→∞πN(∅)⟨X2
N⟩= lim
N→∞πN(∅)[⟨X2
N⟩ − ⟨XN⟩2] +πN(∅)⟨XN⟩2
= 0. (163)
The first term vanishes because of the convergence of the variance divided by N2, and the
second term vanishes because of the convergence of the mean divided by N2(or of the mean
squared divided by N4, which is implied by the convergence of the mean). We, therefore,
conclude that
lim
N→∞1
N2[⟨X2
N|G̸=∅⟩ − ⟨XN|G̸=∅⟩2] = lim
N→∞1
N2⟨X2
N⟩ − ⟨XN⟩2
[1−πN(∅)]2
=∂2ζ(v0, γ)
∂v2
0. (164)
Therefore, there exists an N1such that N > N 1implies
1
N2[⟨X2
N|G̸=∅⟩ − ⟨XN|G̸=∅⟩2]−∂2ζ(v0, γ)
∂v2
0< ϵ2. (165)
Let us now assume that N > max{N0, N1}. Dividing by N2, we obtain a bound for the
55variance of XN/N2:
V(XN/N2|G̸=∅)−1
N2∂2ζ(v0, γ)
∂v2
0<ϵ2
N2,
=⇒V(XN/N2|G̸=∅)<1
N2∂2ζ(v0, γ)
∂v2
0+ϵ2
. (166)
Going back to Chebyshev’s inequality, we obtain that
PXN
N2−∂ζ(v0, γ)
∂v0≤ϵG̸=∅
≥1−4
N2
1 +1
ϵ2∂2ζ(v0, γ)
∂v2
0
. (167)
This implies that
lim
N→∞PXN
N2−∂ζ(v0, γ)
∂v0≤ϵG̸=∅
= 1. (168)
We, therefore, conclude thatXN
N2converges in probability to∂ζ(v0,γ)
∂v0, conditional on G̸=∅.
A completely analogous argument shows thatYN
N2converges in probability to∂ζ(v0,γ)
∂γ.
By conditioning on G̸=∅,XN
N2is a strictly positive random variable. Applying Slutsky’s
theorem, we have that
XN
N2−1YN
N2
p− →∂ζ(v0, γ)
∂v0−1∂ζ(v0, γ)
∂γ
, (169)
wherep− →denotes convergence in probability. Now, note that in our case we have that XN(g)
corresponds to the number of dyads in gandYN(g) corresponds to the negative of the sum of
the distances corresponding to each dyad. Therefore, we have that −YN/XNis the average
distance between neighbors. Since the distance is bounded by D, we have that
YN
XN<D. (170)
As such, the random variableXN
YNhas bounded support and is, therefore, uniformly integrable
(Lemma 2.31 in [Pollard, 2001]). Since uniform integrability and convergence in probability
56are sufficient to have convergence in mean, we conclude that
lim
N→∞*∂ΦN(v0, γ)
∂v0−1∂ΦN(v0, γ)
∂γG̸=∅+
=∂ζ(v0, γ)
∂v0−1∂ζ(v0, γ)
∂γ
.(171)
A.8 Proof of Proposition 4
Note that the trade model can be written in terms of the group-size preferences model. We
have that for utilities of the form
Vi(g) =X
j∈Ni(g)[v0−γDij] +BN(|Ni(g)|), (172)
the partition function is given by
ZN(v0, γ) =Y
r∈Θ
 Ns−δrsX
lrs=0!
s∈Θ"Y
s∈Θlrs
Ns−δrs#
exp X
q∈Θ[v0−γ˜Dr,q]lrq+BN X
q∈Θlrq!!
Nr
.
(173)
For the case of the trade model, we have that
BN(l) =−c
Nl2. (174)
The partition function for the trade model, then, is given by
ZN(v0, γ, c) =Y
r∈Θ
 Ns−δrsX
lrs=0!
s∈Θ"Y
s∈Θlrs
Ns−δrs#
exp
X
q∈Θ[v0−γ˜Dr,q]lrq−c
N X
q∈Θlrq!2

Nr
.
(175)
57This can be re-written as
ZN(v0, γ, c)
=Y
r∈Θ
 Ns−δrsX
lrs=0!
s∈Θexp
X
s∈Θ
loglrs
Ns−δrs
+ [v0−γ˜Dr,s]lrs
−c
N X
q∈Θlrq!2

Nr
.
(176)
Taking logs, we obtain
log(ZN(v0, γ, c))
=X
r∈ΘNrlog
 Ns−δrsX
lrs=0!
s∈Θexp
X
s∈Θ
loglrs
Ns−δrs
+ [v0−γ˜Dr,s]lrs
−c
N X
q∈Θlrq!2

.
(177)
To asymptotically evaluate this expression, we can use the Stirling bounds on the factorial:
√
2πnn
en
e1
12n+1< n!<√
2πnn
en
e1
12n, (178)
forn >0. This implies that, ifkn
n→x∈(0,1) as n→ ∞ , the following holds:
lim
n→∞1
nlogn
kn
=−[xlog(x) + (1 −x) log(1 −x)]. (179)
Now, for a sequence lN
rsthat satisfies lim N→∞lN
rs/Ns=xrs∈(0,1), we have that
lim
N→∞1
N
X
s∈Θ
loglrs
Ns−δrs
+ [v0−γ˜Dr,s]lrs
−c
N X
q∈Θlrq!2

= lim
N→∞X
s∈ΘNs−δrs
N1
Ns−δrsloglrs
Ns−δrs
+ [v0−γ˜Dr,s]Ns
Nlrs
Ns
−c X
q∈ΘNq
Nlrq
Nq!2
=X
s∈Θws
−[xrslog(xrs) + (1 −xrs) log(1 −xrs)] + [v0−γ˜Dr,s]xrs
−c X
q∈Θwqxrq!2
,
(180)
58since we have that Ns/N→wsasN→ ∞ . For xr≡(xrs)s, define the function
Yr(xr)≡X
s∈Θws
−[xrslog(xrs) + (1 −xrs) log(1 −xrs)] + [v0−γ˜Dr,s]xrs
−c X
q∈Θwqxrq!2
.
(181)
The partial derivatives of Yrare
∂Yr
∂xrs=ws[log(1−xrs)−log(xrs)] +ws[v0−γ˜Dr,s]−2cwsX
q∈Θwqxrq. (182)
The second partial derivatives are
∂2Yr
∂xrq∂xrs=−ws
xrs(1−xrs)δsq−2cwswq. (183)
Take an arbitrary vector ( zs)s∈Θ. We have that
X
s,q∈Θzs∂2Yr
∂xrq∂xrs
zq=−"X
s,q∈Θws
xrs(1−xrs)δsqzszq+ 2cwswqzszq#
=−
X
s∈Θws
xrs(1−xrs)z2
s+ 2c X
s∈Θwszs!2
. (184)
This quantity is strictly negative if z̸=0. As such, we have that the Hessian is negative
definite, meaning that Yrhas a unique maximum in [0 ,1]|Θ|= [0,1]C.
For a finite set A, define a≡max{A}. We have that
ea≤X
a∈Aea≤ |A| ea. (185)
Taking logs, this yields
a≤log X
a∈Aea!
≤a+ log(|A|). (186)
For a given r∈Θ, the sum we wish to evaluate runs over the set that is indexed by
59Ar={(ns)s|0≤ns≤Ns−δrs}. This set satisfies
|Ar| ≤Y
s∈ΘNs=⇒ log(|Ar|)≤X
s∈Θlog(Ns). (187)
Since Ns≤N, we this implies
log(|Ar|)≤Clog(N). (188)
Dividing by Nyields
a
N≤1
Nlog X
a∈Aea!
≤a
N+CN
log(N). (189)
From the previous analysis, we have that the maximum of our sum is the unique maximizer
ofYr:
lim
N→∞a
N= max
xr∈[0,1]CYr(xr). (190)
Since lim N→∞log(N)/N= 0, we conclude that
lim
N→∞1
Nlog X
a∈Area!
= max
xr∈[0,1]CYr(xr). (191)
Note that the partition function can be written in terms of the sum over Aas
log(ZN(v0, γ, c)) =X
r∈ΘNrlog X
a∈Area!
. (192)
60We, therefore, have that
ζtrade(v0, γ, c) = lim
N→∞ZN(v0, γ, c)
N2
= lim
N→∞X
r∈ΘNr
N1
Nlog X
a∈Area!
=X
r∈Θwrmax
xr∈[0,1]CYr(xr)
=X
r∈Θwrmax
xr∈[0,1]CX
s∈Θws
H(xrs) + [v0−γ˜Dr,s]xrs
−c X
q∈Θwqxrq!2
.(193)
To evaluate the average trade between countries rands, note that the generating function
for this problem is
ΦN(g;v0, γ, c) =X
r∈ΘX
s∈Θh
v0−γ˜Dr,si
lrs(g) +c
NX
i∈N|Ni(g)|2. (194)
For a given network g, the normalized trade is given by
Trs,N(g) =lrs(g)
Nr(Ns−δrs). (195)
Note that this can be obtained as
Trs,N(g) =1
Nr(Ns−δrs) 
−1
γ∂ΦN(g;v0, γ, c)
∂˜Dr,s!
. (196)
The limiting behavior, then, can be obtained from
lim
N→∞⟨Trs,N⟩=−1
γlim
N→∞N2
Nr(Ns−δrs)*
1
N2∂ΦN(v0, γ, c)
∂˜Dr,s+
=−1
γ1
wrws∂ζtrade(v0, γ, c)
∂˜Dr,s. (197)
Applying the envelope theorem to the expression in Equation (193) yields
∂ζtrade(v0, γ, c)
∂˜Dr,s=−γwrwsx∗
rs, (198)
61where x∗
rsis the maximizer in the expression for ζ. We, therefore, have that
lim
N→∞⟨Trs,N⟩=x∗
rs. (199)
To obtain x∗
rs, we can use the expressions for the first derivatives in Equation (182) to obtain
the first-order conditions of the optimization problem. The condition associated to xrqis
wq[log(1−x∗
rq)−log(x∗
rq)] +wq[v0−γ˜Dr,q]−2cwqX
q′∈Θwq′x∗
rq′= 0,
=⇒log1−x∗
rq
x∗
rq
+v0−γ˜Dr,q−2cX
q′∈Θwq′x∗
rq′= 0. (200)
Note that this implies that the quantity
log1−x∗
rq
x∗
rq
+v0−γ˜Dr,q (201)
is the same for all q, given r. Denoting this quantity with Br, we have that
log1−x∗
rq
x∗
rq
+v0−γ˜Dr,q=Br,
=⇒ x∗
rq= [1 + eBreγ˜Dr,q−v0]−1. (202)
Additionally, note that Brmust satisfy
Br= 2cX
q′∈Θwq′x∗
rq′
= 2cX
q′∈Θwq′[1 +eBreγ˜Dr,q′−v0]−1. (203)
We have that the x∗
rq′are strictly decreasing functions of Br, that lim Br→0x∗
rq′>0 and that
limBr→∞x∗
rq′= 0. This implies that there is a unique root of the above equation. Using the
62implicit function theorem, we have that
∂Br
∂c= 2X
q′∈Θwq′x∗
rq′+ 2c X
q′∈Θwq′∂x∗
rq′
∂Br!
∂Br
∂c,
=⇒∂Br
∂c"
1−2cX
q′∈Θwq′∂x∗
rq′
∂Br#
= 2X
q′∈Θwq′x∗
rq′. (204)
Since∂x∗
rq′
∂Br<0, we conclude that Bris increasing in c. Writing Ar(c)≡eBr, we can express
the limiting behavior of the normalized trade as
lim
N→∞⟨Trs,N⟩= [1 + Ar(c)eγ˜Dr,s−v0]−1. (205)
63